<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Forever Valentine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Pinyon+Script&family=Montserrat:wght@300;400&family=Noto+Serif+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --yellow: #FFDE21;
            --heart-red: #ff4d4d;
            --vinyl-black: #121212;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #000;
            margin: 0;
            overflow: hidden; 
        }
        
        .main-serif { font-family: 'Playfair Display', serif; }
        .handwritten { font-family: 'Pinyon Script', cursive; }
        .hindi-text { font-family: 'Playfair Display', serif; }

        .reel-container {
            height: 100vh;
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            display: none; 
            scroll-behavior: smooth;
            background-color: #000;
        }
        .reel-page {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .blur-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: blur(50px) brightness(0.3);
            transform: scale(1.3);
            z-index: 1;
        }

        .image-container {
            position: relative;
            z-index: 10;
            width: 80vw;
            height: 80vw;
            max-width: 380px;
            max-height: 380px;
            overflow: hidden;
            border-radius: 24px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.15);
            margin-bottom: 2rem;
        }
        
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .caption-container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 2rem;
            max-width: 450px;
        }

        .caption-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            line-height: 1.6;
            font-style: italic;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        #landing-page, .end-page {
            height: 100vh;
            width: 100vw;
            background-color: var(--yellow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            text-align: center;
        }

        #landing-page {
            position: fixed;
            top: 0;
            left: 0;
            transition: transform 1s cubic-bezier(0.85, 0, 0.15, 1);
        }

        .vinyl-container {
            position: relative;
            width: 240px;
            height: 240px;
            margin-top: 2rem;
            cursor: pointer;
            animation: fadeIn 1.8s ease-out;
            filter: drop-shadow(0 15px 30px rgba(0,0,0,0.3));
        }

        .vinyl-record {
            width: 100%;
            height: 100%;
            background: var(--vinyl-black);
            border-radius: 50%;
            position: relative;
            animation: rotateVinyl 12s linear infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #000;
        }

        .vinyl-record::after {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 50%;
            background: repeating-radial-gradient(circle at center, rgba(255, 255, 255, 0.05) 0px, rgba(255, 255, 255, 0.05) 1px, transparent 2px, transparent 3px);
            pointer-events: none;
        }

        .vinyl-sheen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.1) 48%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.1) 52%, transparent 60%);
            z-index: 2;
        }

        .vinyl-label {
            width: 90px;
            height: 90px;
            background: var(--heart-red);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            border: 4px solid #000;
        }

        @keyframes rotateVinyl { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes beat { 0%, 100% { transform: scale(1); } 15% { transform: scale(1.3); } 30% { transform: scale(1); } 45% { transform: scale(1.15); } }

        .beating-heart {
            animation: beat 1s infinite ease-in-out;
            color: var(--heart-red);
            filter: drop-shadow(0 0 15px rgba(255, 77, 77, 0.6));
        }

        .fade-out { transform: translateY(-100vh) !important; }

        .music-indicator {
            position: absolute;
            bottom: 30px;
            z-index: 20;
            display: flex;
            gap: 4px;
        }
        .bar {
            width: 3px;
            height: 14px;
            background: rgba(255,255,255,0.7);
            border-radius: 4px;
            animation: pulse 0.8s ease-in-out infinite;
        }
        @keyframes pulse { 0%, 100% { height: 8px; } 50% { height: 20px; } }

        .text-reveal {
            animation: fadeIn 1.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
        }
    </style>
</head>
<body>

    <!-- Landing Page Song 0 -->
    <div id="landing-page">
        <div class="text-reveal" style="animation-delay: 0.3s">
            <h1 class="main-serif text-5xl text-black font-light tracking-tight">For my forever</h1>
            <h2 class="handwritten text-7xl text-black -mt-4 mb-2">Valentine</h2>
        </div>
        
        <div class="vinyl-container" onclick="enterExperience()">
            <div class="vinyl-record">
                <div class="vinyl-sheen"></div>
                <div class="vinyl-label">
                    <svg viewBox="0 0 24 24" width="45" height="45" fill="black">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <p class="mt-12 text-[10px] font-bold uppercase tracking-[0.5em] text-black/40 text-reveal" style="animation-delay: 1.2s">
            Tap anywhere to play our song
        </p>
    </div>

    <div class="reel-container" id="reel">
        <!-- Memory 1 -->
        <section class="reel-page" data-song="1.mp3">
            <div class="blur-bg" style="background-image: url('Photo 1.jpg')"></div>
            <div class="image-container">
                <img src="Photo 1.jpg" alt="Memory 1" onerror="this.src='https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=800'">
            </div>
            <div class="caption-container">
                <p class="hindi-text caption-text">
                    Tumse baat karna aadat ban gayi,<br>
                    Tumse milna zarurat ban gayi,<br>
                    Aur pata hi nahi chala kab meri mohabbat ban gayi.
                </p>
            </div>
            <div class="music-indicator"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </section>

        <!-- Memory 2 -->
        <section class="reel-page" data-song="2.mp3">
            <div class="blur-bg" style="background-image: url('Photo 2.jpg')"></div>
            <div class="image-container">
                <img src="Photo 2.jpg" alt="Memory 2" onerror="this.src='https://images.unsplash.com/photo-1522673607200-164883eecd0c?q=80&w=800'">
            </div>
            <div class="caption-container">
                <p class="hindi-text caption-text">
                    Us din bas ek rasam nahi hui,<br>
                    Us din meri zindagi ko tumhara naam mil gaya,<br>
                    Aur mujhe mera ghar.
                </p>
            </div>
            <div class="music-indicator"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </section>

        <!-- Memory 3 -->
        <section class="reel-page" data-song="3.mp3">
            <div class="blur-bg" style="background-image: url('Photo 3.jpg')"></div>
            <div class="image-container">
                <img src="Photo 3.jpg" alt="Memory 3" onerror="this.src='https://images.unsplash.com/photo-1474552226712-ac0f0961a954?q=80&w=800'">
            </div>
            <div class="caption-container">
                <p class="hindi-text caption-text">
                    Ek chhoti si angoothi ne,<br>
                    Meri duniya ko mukammal kar diya,<br>
                    Ab har kal mein sirf tum ho.
                </p>
            </div>
            <div class="music-indicator"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </section>

        <!-- Memory 4 -->
        <section class="reel-page" data-song="4.mp3">
            <div class="blur-bg" style="background-image: url('Photo 4.jpg')"></div>
            <div class="image-container">
                <img src="Photo 4.jpg" alt="Memory 4" onerror="this.src='https://images.unsplash.com/photo-1516589174184-c6858b16ecb0?q=80&w=800'">
            </div>
            <div class="caption-container">
                <p class="hindi-text caption-text">
                    Safar khoobsurat tha,<br>
                    Magar usse bhi zyada khoobsurat tumhara saath tha,<br>
                    Tab samjha, ghar ek jagah nahi, ek insaan hota hai.
                </p>
            </div>
            <div class="music-indicator"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </section>

        <!-- Memory 5 -->
        <section class="reel-page" data-song="5.mp3">
            <div class="blur-bg" style="background-image: url('Photo 5.jpg')"></div>
            <div class="image-container">
                <img src="Photo 5.jpg" alt="Memory 5" onerror="this.src='https://images.unsplash.com/photo-1511733331976-2906c8880d60?q=80&w=800'">
            </div>
            <div class="caption-container">
                <p class="hindi-text caption-text">
                    Ab tum meri aadat bhi ho, ibadat bhi ho,<br>
                    Meri khamoshi bhi ho, meri chahat bhi ho,<br>
                    Meri zindagi ki sabse khoobsurat haqeeqat bhi ho.
                </p>
            </div>
            <div class="music-indicator"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </section>

        <!-- End Page Song 6 -->
        <section class="reel-page end-page scroll-snap-align-start" data-song="6.mp3">
            <div class="px-10 flex flex-col items-center">
                <div class="beating-heart mb-14">
                    <svg viewBox="0 0 24 24" width="80" height="80" fill="currentColor">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                </div>
                <p class="main-serif text-3xl italic text-black leading-tight max-w-[320px]">
                    For many more memories to make and many more songs to live.
                </p>
                <div class="w-24 h-[1px] bg-black/10 my-10"></div>
                <h2 class="handwritten text-6xl text-black tracking-tight">Happy Valentine's Day</h2>
            </div>
        </section>
    </div>

    <script>
        const landing = document.getElementById('landing-page');
        const reel = document.getElementById('reel');
        const pages = document.querySelectorAll('.reel-page');
        
        const audioPlayers = new Map();
        let currentPageIndex = -2; // -2: Landing, -1: Transition, 0+: Memories/End
        let interactionUnlocked = false;

        // Initialize Landing Page Audio
        const landingAudio = new Audio('0.mp3');
        landingAudio.loop = true;
        landingAudio.preload = "auto";
        audioPlayers.set(-2, landingAudio);

        // Function to unlock audio context and play landing song
        function unlockAudio() {
            if (interactionUnlocked) return;
            interactionUnlocked = true;
            
            landingAudio.play().catch(e => console.log("Play failed even with gesture:", e));
            preloadAllAudio();
            
            // Remove the listener once unlocked
            document.removeEventListener('click', unlockAudio);
            document.removeEventListener('touchstart', unlockAudio);
        }

        // Listen for ANY interaction to start music 0
        document.addEventListener('click', unlockAudio);
        document.addEventListener('touchstart', unlockAudio);

        function preloadAllAudio() {
            pages.forEach((page, index) => {
                const songSrc = page.getAttribute('data-song');
                if (songSrc) {
                    const audio = new Audio(songSrc);
                    audio.loop = true;
                    audio.preload = "auto";
                    audioPlayers.set(index, audio);
                }
            });
        }

        function enterExperience() {
            // Ensure audio starts if they specifically clicked the vinyl
            if (!interactionUnlocked) unlockAudio();
            
            landing.classList.add('fade-out');
            reel.style.display = 'block';
            document.body.style.overflow = 'auto';
            
            setTimeout(() => { handleScroll(); }, 800);
        }

        function handleScroll() {
            const scrollPos = reel.scrollTop;
            const windowHeight = window.innerHeight;
            const newIndex = Math.round(scrollPos / windowHeight);
            
            if (newIndex !== currentPageIndex) {
                updateMusic(newIndex);
                currentPageIndex = newIndex;
            }
        }

        function updateMusic(newIndex) {
            // Fade out current
            if (audioPlayers.has(currentPageIndex)) {
                fadeOutAudio(audioPlayers.get(currentPageIndex));
            }

            // Play new instantly
            if (audioPlayers.has(newIndex)) {
                const nextAudio = audioPlayers.get(newIndex);
                nextAudio.volume = 1.0;
                nextAudio.play().catch(e => console.log("Play blocked:", e));
            }
        }

        function fadeOutAudio(audioObj) {
            let volume = audioObj.volume;
            const fadeInterval = setInterval(() => {
                if (volume > 0.1) {
                    volume -= 0.1;
                    audioObj.volume = volume;
                } else {
                    audioObj.pause();
                    audioObj.volume = 1.0;
                    clearInterval(fadeInterval);
                }
            }, 50);
        }

        reel.addEventListener('scroll', handleScroll);
    </script>
</body>
</html>